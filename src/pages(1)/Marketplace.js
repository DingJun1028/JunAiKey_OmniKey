var __makeTemplateObject = (this && this.__makeTemplateObject) || function (cooked, raw) {
    if (Object.defineProperty) { Object.defineProperty(cooked, "raw", { value: raw }); } else { cooked.raw = raw; }
    return cooked;
};
""(__makeTemplateObject(["typescript\n// src/pages/Marketplace.tsx\n// Course Marketplace Page\n// Displays simulated course product pages generated from knowledge.\n// --- New: Create a page to display simulated course product pages --\n// --- New: Implement fetching simulated syllabus data --\n// --- New: Integrate generateProductPage.tsx component --\n\nimport React, { useEffect, useState } from 'react';\nimport { SyllabusGenerator, Syllabus } from '../marketplace/generateSyllabus'; // Import SyllabusGenerator and Syllabus type\nimport CourseProductPage from '../marketplace/generateProductPage'; // Import the product page component\nimport { Loader2, BookOpen } from 'lucide-react'; // Import icons\n\n// Access core modules from the global window object (for MVP simplicity)\n// In a real app, use React Context or dependency injection\ndeclare const window: any;\nconst syllabusGenerator: SyllabusGenerator = window.systemContext?.syllabusGenerator; // The Syllabus Generator\nconst systemContext: any = window.systemContext; // Access the full context for currentUser\n\n\nconst Marketplace: React.FC = () => {\n  const [simulatedSyllabus, setSimulatedSyllabus] = useState<Syllabus | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  // Simulate fetching or generating a syllabus on page load\n  const fetchSimulatedSyllabus = async () => {\n       const userId = systemContext?.currentUser?.id;\n       if (!syllabusGenerator || !userId) {\n            setError(\"SyllabusGenerator module not initialized or user not logged in.\");\n            setLoading(false);\n            return;\n        }\n      setLoading(true);\n      setError(null);\n      try {\n          // --- Simulate generating a syllabus from some dummy data or user's knowledge ---\n          // In a real scenario, you might fetch a specific 'publishable' knowledge collection\n          // or trigger generation based on user selection.\n          // For MVP, let's simulate generating from a fixed set of dummy records or a known collection ID.\n          console.log('[Marketplace] Simulating fetching/generating syllabus...');\n\n          // Option 1: Generate from a known collection ID (if one exists and has records)\n          // const knownCollectionId = 'some-predefined-collection-id'; // Replace with a real ID if available\n          // const syllabus = await syllabusGenerator.generateFromKnowledge(userId, knownCollectionId);\n\n          // Option 2: Generate from a fixed set of dummy data (simpler for MVP demo)\n          // This requires the generateFromKnowledge method to accept raw data or use internal dummy data.\n          // Let's modify generateFromKnowledge to accept an optional array of dummy records for demo.\n          // Or, simulate the output structure directly here.\n          // Simulating the output structure directly is simplest for MVP UI demo.\n\n          const dummySyllabus: Syllabus = {\n              title: \"Jun.Ai.Key Core Concepts Explained\",\n              description: \"A comprehensive course explaining the core pillars and architecture of the Jun.Ai.Key system.\",\n              targetAudience: \"Jun.Ai.Key Users and Developers\",\n              learningObjectives: [\n                  \"Understand the Six Pillars of the Sacred Codex\",\n                  \"Learn the steps of the Infinite Evolution Cycle\",\n                  \"Explore the Agent System Architecture\",\n                  \"Identify key data models and their purpose\",\n                  \"Understand the role of Runes and Integrations\",\n                  \"Learn about the Security Service features\"\n              ],\n              modules: [\n                  {\n                      title: \"Module 1: The Sacred Codex\",\n                      description: \"Dive deep into the foundational data structures.\",\n                      lessons: [\n                          { title: \"Lesson 1.1: Long-term Memory & Knowledge Base\", description: \"Storing and retrieving knowledge.\", knowledgeRecordIds: [\"sim-kb-1\", \"sim-kb-2\"] },\n                          { title: \"Lesson 1.2: Self-Navigation & Tasks\", description: \"Automating your workflows.\", knowledgeRecordIds: [\"sim-task-1\"] },\n                          { title: \"Lesson 1.3: Authority Forging & Abilities\", description: \"Turning actions into automation.\", knowledgeRecordIds: [\"sim-action-1\", \"sim-ability-1\"] },\n                      ]\n                  },\n                  {\n                      title: \"Module 2: System Dynamics\",\n                      description: \"Understanding how the system learns and acts.\",\n                      lessons: [\n                          { title: \"Lesson 2.1: The Infinite Evolution Cycle\", description: \"Observe, Precipitate, Learn, Decide, Act, Trigger.\", knowledgeRecordIds: [\"sim-insight-1\"] },\n                          { title: \"Lesson 2.2: Agent System Communication\", description: \"Messages and Routing.\", knowledgeRecordIds: [] },\n                      ]\n                  },\n                   {\n                      title: \"Module 3: External Integration & Security\",\n                      description: \"Connecting to the outside world and staying safe.\",\n                      lessons: [\n                          { title: \"Lesson 3.1: Rune Engrafting\", description: \"Integrating external services.\", knowledgeRecordIds: [\"sim-rune-1\"] },\n                          { title: \"Lesson 3.2: Security Service\", description: \"Authentication, Authorization, and Data Protection.\", knowledgeRecordIds: [] },\n                      ]\n                  }\n              ]\n          };\n\n          // Simulate generation delay\n          await new Promise(resolve => setTimeout(resolve, 1500));\n\n          setSimulatedSyllabus(dummySyllabus);\n\n      } catch (err: any) {\n          console.error('Error fetching/generating simulated syllabus:', err);\n          setError("], ["typescript\n// src/pages/Marketplace.tsx\n// Course Marketplace Page\n// Displays simulated course product pages generated from knowledge.\n// --- New: Create a page to display simulated course product pages --\n// --- New: Implement fetching simulated syllabus data --\n// --- New: Integrate generateProductPage.tsx component --\n\nimport React, { useEffect, useState } from 'react';\nimport { SyllabusGenerator, Syllabus } from '../marketplace/generateSyllabus'; // Import SyllabusGenerator and Syllabus type\nimport CourseProductPage from '../marketplace/generateProductPage'; // Import the product page component\nimport { Loader2, BookOpen } from 'lucide-react'; // Import icons\n\n// Access core modules from the global window object (for MVP simplicity)\n// In a real app, use React Context or dependency injection\ndeclare const window: any;\nconst syllabusGenerator: SyllabusGenerator = window.systemContext?.syllabusGenerator; // The Syllabus Generator\nconst systemContext: any = window.systemContext; // Access the full context for currentUser\n\n\nconst Marketplace: React.FC = () => {\n  const [simulatedSyllabus, setSimulatedSyllabus] = useState<Syllabus | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  // Simulate fetching or generating a syllabus on page load\n  const fetchSimulatedSyllabus = async () => {\n       const userId = systemContext?.currentUser?.id;\n       if (!syllabusGenerator || !userId) {\n            setError(\"SyllabusGenerator module not initialized or user not logged in.\");\n            setLoading(false);\n            return;\n        }\n      setLoading(true);\n      setError(null);\n      try {\n          // --- Simulate generating a syllabus from some dummy data or user's knowledge ---\n          // In a real scenario, you might fetch a specific 'publishable' knowledge collection\n          // or trigger generation based on user selection.\n          // For MVP, let's simulate generating from a fixed set of dummy records or a known collection ID.\n          console.log('[Marketplace] Simulating fetching/generating syllabus...');\n\n          // Option 1: Generate from a known collection ID (if one exists and has records)\n          // const knownCollectionId = 'some-predefined-collection-id'; // Replace with a real ID if available\n          // const syllabus = await syllabusGenerator.generateFromKnowledge(userId, knownCollectionId);\n\n          // Option 2: Generate from a fixed set of dummy data (simpler for MVP demo)\n          // This requires the generateFromKnowledge method to accept raw data or use internal dummy data.\n          // Let's modify generateFromKnowledge to accept an optional array of dummy records for demo.\n          // Or, simulate the output structure directly here.\n          // Simulating the output structure directly is simplest for MVP UI demo.\n\n          const dummySyllabus: Syllabus = {\n              title: \"Jun.Ai.Key Core Concepts Explained\",\n              description: \"A comprehensive course explaining the core pillars and architecture of the Jun.Ai.Key system.\",\n              targetAudience: \"Jun.Ai.Key Users and Developers\",\n              learningObjectives: [\n                  \"Understand the Six Pillars of the Sacred Codex\",\n                  \"Learn the steps of the Infinite Evolution Cycle\",\n                  \"Explore the Agent System Architecture\",\n                  \"Identify key data models and their purpose\",\n                  \"Understand the role of Runes and Integrations\",\n                  \"Learn about the Security Service features\"\n              ],\n              modules: [\n                  {\n                      title: \"Module 1: The Sacred Codex\",\n                      description: \"Dive deep into the foundational data structures.\",\n                      lessons: [\n                          { title: \"Lesson 1.1: Long-term Memory & Knowledge Base\", description: \"Storing and retrieving knowledge.\", knowledgeRecordIds: [\"sim-kb-1\", \"sim-kb-2\"] },\n                          { title: \"Lesson 1.2: Self-Navigation & Tasks\", description: \"Automating your workflows.\", knowledgeRecordIds: [\"sim-task-1\"] },\n                          { title: \"Lesson 1.3: Authority Forging & Abilities\", description: \"Turning actions into automation.\", knowledgeRecordIds: [\"sim-action-1\", \"sim-ability-1\"] },\n                      ]\n                  },\n                  {\n                      title: \"Module 2: System Dynamics\",\n                      description: \"Understanding how the system learns and acts.\",\n                      lessons: [\n                          { title: \"Lesson 2.1: The Infinite Evolution Cycle\", description: \"Observe, Precipitate, Learn, Decide, Act, Trigger.\", knowledgeRecordIds: [\"sim-insight-1\"] },\n                          { title: \"Lesson 2.2: Agent System Communication\", description: \"Messages and Routing.\", knowledgeRecordIds: [] },\n                      ]\n                  },\n                   {\n                      title: \"Module 3: External Integration & Security\",\n                      description: \"Connecting to the outside world and staying safe.\",\n                      lessons: [\n                          { title: \"Lesson 3.1: Rune Engrafting\", description: \"Integrating external services.\", knowledgeRecordIds: [\"sim-rune-1\"] },\n                          { title: \"Lesson 3.2: Security Service\", description: \"Authentication, Authorization, and Data Protection.\", knowledgeRecordIds: [] },\n                      ]\n                  }\n              ]\n          };\n\n          // Simulate generation delay\n          await new Promise(resolve => setTimeout(resolve, 1500));\n\n          setSimulatedSyllabus(dummySyllabus);\n\n      } catch (err: any) {\n          console.error('Error fetching/generating simulated syllabus:', err);\n          setError("]));
Failed;
to;
load;
course;
data: $;
{
    err.message;
}
");\n      } finally {\n          setLoading(false);\n      }\n  };\n\n\n  useEffect(() => {\n    // Fetch data when the component mounts or when the user changes\n    if (systemContext?.currentUser?.id) {\n        fetchSimulatedSyllabus(); // Fetch simulated syllabus on initial load\n    }\n\n    // TODO: Subscribe to relevant events if syllabus data can change dynamically\n\n  }, [systemContext?.currentUser?.id, syllabusGenerator]); // Re-run effect when user ID or generator changes\n\n\n   // Ensure user is logged in before rendering content\n  if (!systemContext?.currentUser) {\n       // This case should ideally be handled by ProtectedRoute, but as a fallback:\n       return (\n            <div className=\"container mx-auto p-4 flex justify-center\">\n               <div className=\"bg-neutral-800/50 p-8 rounded-lg shadow-xl w-full max-w-md text-center text-neutral-300\">\n                   <p>Please log in to view the Marketplace.</p>\n               </div>\n            </div>\n       );\n  }\n\n\n  return (\n    <div className=\"container mx-auto p-4\">\n      <div className=\"bg-neutral-800/50 p-6 rounded-lg shadow-xl\">\n        <h2 className=\"text-3xl font-bold text-blue-400 mb-6 flex items-center gap-2\"><BookOpen size={24}/> Course Marketplace (Simulated)</h2>\n        <p className=\"text-neutral-300 mb-8\">Explore courses generated from your knowledge. (This is a simulated view)</p>\n\n        {loading ? (\n          <div className=\"flex justify-center items-center py-8\">\n              <Loader2 size={32} className=\"animate-spin text-blue-400\"/>\n              <span className=\"text-neutral-400 ml-3\">Generating course syllabus...</span>\n          </div>\n        ) : error ? (\n             <p className=\"text-red-400\">Error: {error}</p>\n        ) : !simulatedSyllabus ? (\n             <p className=\"text-neutral-400\">No course data available.</p>\n        ) : (\n            // --- New: Render the CourseProductPage component ---\n            <CourseProductPage\n                syllabus={simulatedSyllabus}\n                price={199} // Simulated price\n                coverImageUrl=\"https://via.placeholder.com/800x400?text=Jun.Ai.Key+Course\" // Placeholder image\n                authorName={systemContext?.currentUser?.name || 'Jun.Ai.Key'} // Use current user's name as author\n                checkoutUrl=\"https://simulated-checkout.example.com/buy/junai-course\" // Simulated checkout URL\n            />\n            // --- End New ---\n        )}\n\n      </div>\n    </div>\n  );\n};\n\nexport default Marketplace;\n"(__makeTemplateObject([""], [""]));
